# -*- coding: utf-8 -*-
"""create_call.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1-P4yaLKUPe8WR6KkdR76riOl8rSP4moN
"""

# ============================================================
# 1) INSTALAR gTTS
# ============================================================
!pip install -q gTTS

# ============================================================
# 2) IMPORTS E CONFIG
# ============================================================
from gtts import gTTS
from pathlib import Path
from google.colab import files
import random
import time
import shutil

OUTPUT_DIR = Path("/content/audios_telemarketing_vivo_fibra")
OUTPUT_DIR.mkdir(exist_ok=True, parents=True)

# ============================================================
# 3) NOMES VARI√ÅVEIS
# ============================================================
nomes_operadores = ["Ana Carolina", "Lucas Mendes", "Fernanda Lima", "Rafael Costa", "Juliana Silva"]
nomes_clientes = ["Maria Oliveira", "Jos√© Santos", "Ana Paula", "Carlos Roberto", "Luiza Ferreira"]

# ============================================================
# 4) 3 VERS√ïES DE DI√ÅLOGO TELEMARKETING VIVO FIBRA
# ============================================================
dialogos = [
    # VERS√ÉO 1: Cliente Receptivo (fecha neg√≥cio)
    """
OPERADOR: Oi, bom dia! Sou da Vivo Fibra, falo com a Maria Oliveira? Meu nome √© Ana Carolina, estou ligando pra te oferecer uma super oferta de economia na internet. (tom animado)

CLIENTE: Bom dia! Sim, sou eu. O que √©? (receptivo)

OPERADOR: Perfeito, Maria! Voc√™ j√° tem wifi em casa hoje? Ahn?

CLIENTE: Tenho sim, da Claro, mas t√° bem inst√°vel.

OPERADOR: Entendi perfeitamente. E quanto voc√™ paga aproximadamente na sua internet atual?

CLIENTE: Uns 120 reais por 200 mega, que √© lentinho.

OPERADOR: Nossa, Maria, voc√™ pode economizar bastante! Olha essa oferta exclusiva pra voc√™: plano de 500 Mega por s√≥ 90 reais no cart√£o, com Wi-Fi 6 de √∫ltima gera√ß√£o que conecta tudo sem travar, mais 6 meses de Amazon Prime gr√°tis e 1 ano de Perplexity Pro IA. Instala√ß√£o gratuita com 12 meses de fidelidade online. √â pra economizar e ter mais velocidade!

CLIENTE: Hmm, parece bom. Wi-Fi 6 √© o novo mesmo?

OPERADOR: Exato! At√© 9 gigabits te√≥ricos, baixa lat√™ncia pra jogos e home office, e app Vivo Smart pra gerenciar tudo. Posso verificar seu CEP rapidinho pra confirmar?

CLIENTE: Meu CEP √© 15090-000. Pode verificar.

OPERADOR: Verificando aqui... Perfeito, dispon√≠vel! Quer ativar hoje e come√ßar a economizar?

CLIENTE: Sim, vamos nessa! Como faz?

OPERADOR: √ìtimo! Vou agendar a instala√ß√£o gr√°tis. Obrigada pela confian√ßa, Maria. Tenha um excelente dia!

CLIENTE: Valeu, Ana. Bom dia!
    """,

    # VERS√ÉO 2: Cliente Resistente (recusa educada)
    """
OPERADOR: Boa tarde! Vivo Fibra aqui, falo com o Jos√© Santos? Eu sou Lucas Mendes, com uma oferta imperd√≠vel pra voc√™ economizar na internet fibra. (tom confiante)

CLIENTE: Boa tarde. Sim, sou eu. Mas t√¥ sem tempo agora. (apressado)

OPERADOR: Entendo, Jos√©, s√≥ 1 minutinho. Voc√™ tem internet em casa hoje?

CLIENTE: Tenho, Vivo Easy de 300 mega.

OPERADOR: Legal! E o valor mensal √© quanto mais ou menos?

CLIENTE: 110 reais, t√¥ satisfeito.

OPERADOR: Perfeito, mas imagina 500 Mega com Wi-Fi 6 por 90 reais, b√¥nus adimpl√™ncia, Amazon Prime 6 meses, Skeelo Audiobooks e instala√ß√£o zero? Mais Vivo Total com celular descontado. Economia real pra mesma qualidade superior!

CLIENTE: N√£o quero fidelidade de 12 meses, prefiro liberdade.

OPERADOR: Entendo, Jos√©. A fidelidade √© online flex√≠vel, cancela pelo app se precisar, mas 99% ficam pelo pre√ßo imbat√≠vel e Wi-Fi 6 que evita travamentos. Gamer? Tem 700 Mega com ExitLag.

CLIENTE: N√£o, obrigado. J√° t√° bom assim.

OPERADOR: Sem problemas, Jos√©. Se mudar de ideia, meu contato fica salvo. Bom dia!

CLIENTE: Valeu. Tchau.
    """,

    # VERS√ÉO 3: Cliente Indeciso (marca retorno)
    """
OPERADOR: Al√¥, bom dia! Aqui √© Fernanda Lima da Vivo Fibra, posso falar com Ana Paula? T√¥ com uma oferta de economia exclusiva pra sua regi√£o em 2026. (tom amig√°vel)

CLIENTE: Bom dia, sim. Fala. (desconfiado)

OPERADOR: √ìtimo, Ana! Primeiro, voc√™ usa internet fixa a√≠ em casa?

CLIENTE: Uso, TIM de 400 mega, mas reclamo da instabilidade.

OPERADOR: Ahn, cl√°ssico isso. Quanto sai mais ou menos na fatura?

CLIENTE: 130 reais, caro pra lentid√£o.

OPERADOR: Ana, pra voc√™ economizar: 700 Mega Gamer por 150 reais, com 1 ponto cabeado, ExitLag, Wi-Fi 6 pra m√∫ltiplos devices sem perda, mais Bancah, Vivo Home Assist e 1 ano Perplexity Pro gr√°tis. CEP dispon√≠vel?

CLIENTE: Parece interessante, mas preciso pensar e falar com o marido.

OPERADOR: Claro, entendo perfeitamente. A oferta √© s√≥ essa semana pra economia m√°xima. Posso ligar amanh√£ √† noite pra confirmar?

CLIENTE: Pode sim, √†s 19h.

OPERADOR: Anotado! Obrigada pela aten√ß√£o, Ana Paula. At√© amanh√£!

CLIENTE: At√©. Obrigada.
    """
]

# ============================================================
# 5) FUN√á√ÉO PARA GERAR UMA FALA (MP3, PT-BR)
# ============================================================
def gerar_arquivo_audio(texto: str, file_path: Path):
    tts = gTTS(text=texto, lang="pt-br", slow=False)
    tts.save(str(file_path))

# ============================================================
# 6) FUN√á√ÉO PARA GERAR UMA LIGA√á√ÉO TELEMARKETING
# ============================================================
def gerar_ligacao_telemarketing(versao: int):
    operador = random.choice(nomes_operadores)
    cliente = random.choice(nomes_clientes)

    # Substituir nomes no di√°logo
    dialogo = dialogos[versao-1].format(operador=operador, cliente=cliente)

    falas = []
    for linha in dialogo.split('\n'):
        linha = linha.strip()
        if linha.startswith('OPERADOR:'):
            texto = linha[9:].strip()
            falas.append(("operador", texto))
        elif linha.startswith('CLIENTE:'):
            texto = linha[8:].strip()
            falas.append(("cliente", texto))

    pasta_ligacao = OUTPUT_DIR / f"telemarketing_v{versao}_{random.randint(100,999)}"
    pasta_ligacao.mkdir(exist_ok=True, parents=True)

    for idx, (falante, texto) in enumerate(falas, start=1):
        file_path = pasta_ligacao / f"{falante}_{idx:02d}.mp3"
        gerar_arquivo_audio(texto, file_path)
        print(f"Vers√£o {versao} - {falante} fala {idx:02d} OK")
        time.sleep(0.3)  # Pausa maior pra evitar rate limit

    print(f"‚úÖ Liga√ß√£o Telemarketing Vers√£o {versao} conclu√≠da.\n")

# ============================================================
# 7) GERAR AS 3 VERS√ïES (expanda se quiser mais)
# ============================================================
print("üöÄ Iniciando gera√ß√£o de 3 vers√µes de liga√ß√µes telemarketing Vivo Fibra...")
for i in range(1, 4):
    gerar_ligacao_telemarketing(i)
    time.sleep(1)

print("üéØ Todas as 3 vers√µes geradas em:", OUTPUT_DIR)

# ============================================================
# 8) ZIPAR E BAIXAR
# ============================================================
zip_path = "/content/audios_telemarketing_vivo_fibra_3_versoes.zip"
shutil.make_archive(zip_path.replace(".zip", ""), "zip", OUTPUT_DIR)
print("üì¶ ZIP criado em:", zip_path)
files.download(zip_path)
print("‚¨áÔ∏è Download iniciado. Descompacte e ou√ßa as varia√ß√µes!")